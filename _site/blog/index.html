<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog &middot; 1SoulJo
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <!-- <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png"> -->
  <link rel="shortcut icon" href="https://smilebasicsource.com/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
          <img src="/public/img/maschine.jpg"/>
      </div>
      <div class="sidebar-personal-info-section">
        <p><strong>developer</strong></p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p> Follow me:
        
        
        
        <a href="https://github.com/1souljo">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="mailto:hansol.jo@gmail.com">
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/">
          Home
        </a>

        
      </span>

    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item active" href="/blog/">
          Blog
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          About
        </a>

        
      </span>

    

    <!-- <span class="sidebar-nav-item">Currently v1.0.0</span> -->
  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2017 1SoulJo. This work is liscensed under <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
  </div>

  <div class="sidebar-item">
    <p>
    Powered by <a href="http://jekyllrb.com">jekyll</a> and <a href="http://codinfox.github.io">codinfox-lanyon</a>
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="1SoulJo">
              1SoulJo
            </a>
            <small>technical blog and study</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/study/2017/11/30/conditional-random-filed/">
        CRF(Contional Random Field)
      </a>
    </h1>

    <span class="post-date">30 Nov 2017</span>
     | 
    
    <a href="/blog/tags/#crf" class="post-tag">CRF</a>
    
    

    <article>
      <h2 id="crf-란">CRF 란?</h2>
<p>저스틴 비버의 하루 일상을 순서대로 찍은 사진들이 있다고 상상해보자.<br />
우리는 각각의 사진에 한 단어로 설명(라벨)을 달고자 한다. (예&gt; 식사 사진, 수면 사진, 운전 중 등등)<br />
어떻게 하면 될까?</p>

<p>한가지 방법은 사진들이 가지는 순서에 대한 정보는 무시하고 각 사진 자체만으로 분류를 해보는 것이 될 수 있겠다.
예를 들어 라벨이 달린 한 달 치의 사진이 주어졌다고 하면, 아침 6시 쯤에 찍힌 어두운 사진들은 ‘수면’ 과 연관이 있는 사진들이고,
밝은 색깔이 많이 포함된 사진은 ‘춤’ 에 대한 사진, 자동차가 나온 사진들은 ‘운전’ 사진이라는 등의 사실을 배울 수 있을 것이다.</p>

<p>하지만 순서에 대한 관점을 무시하면 많은 양의 정보를 잃게 된다. 예를 들어 입만 크게 나온 사진이 있다고 하자. 그건 노래하는 사진일까 밥 먹는 사진일까?
만약 이전의 사진이 저스틴 비버가 밥을 먹거나 요리하는 사진이었다면, 그 입 사진은 ‘먹는’ 행위에 관한 사진일 가능성이 더 높을 것이다.
하지만 이전 사진이 저스틴 비버가 노래나 춤 추는 사진이었다면, 입 사진도 마찬가지로 ‘노래하는’ 사진일 가능성이 높다.</p>

<h3 id="part-of-speech-tagging">Part-of-Speech Tagging</h3>
<p>part-of-speech tagging 를 예로 좀 더 자세히 살펴보도록 하자.<br />
POS tagging 의 목적은 한 문장의 어휘들의 품사를 달아주는 것이다. (ex&gt; 명사, 동사, 형용사, 명사)<br />
예를 들어 ‘Bob drank coffee at Starbucks.’ 라는 문장은 ‘Bob(명사) drank(동사) coffee(명사) at(전치사) Starbucks(명사)’ 가 될 것이다.
그럼 이제 CRF 를 이용해서 <strong>문장에 대한</strong> POS tagging 을 해보자. 먼저 다른 classifier 들과 마찬가지로 feature function <script type="math/tex">f_i</script> 들을 정의해야 한다.</p>

<h3 id="feature-functions-in-a-crf">Feature functions in a CRF</h3>
<p>CRF 에서 각각의 feature function 은 아래와 같은 입력들을 받는 함수이다:</p>
<ul>
  <li>s : 문장</li>
  <li>i : 단어의 문장 내 인덱스</li>
  <li><script type="math/tex">l_i</script> : 현재 단어의 라벨</li>
  <li><script type="math/tex">l_{i-1}</script> : 이전 단어의 라벨</li>
</ul>

<p>그리고 출력 값은 실수 값이 된다.(하지만 실제로는 0 또는 1 인 경우가 많다.)</p>

<p><em>참고 : 본 포스팅에서는 문장 전체에 대한 라벨이 아니라 현재 단어와 이전 단어의 라벨만 사용하도록 제한하고 있다.
이것은 <strong>linear-chain CRF</strong> 의 일종이라고 할 수 있다. 설명의 편의를 위해 범용적인 CRF 에 대한 내용은 생략하고자 한다.</em></p>

<h3 id="feature-를-probabilties-로">Feature 를 Probabilties 로.</h3>
<p>이제 각각의 feature function <script type="math/tex">f_j</script> 에 weight <script type="math/tex">\lambda_j</script> 를 할당해 보자.(데이터로부터 이 weight 들을 어떻게 학습하는 지는 아래에 설명하겠다.)<br />
문장 s 가 주어졌을 때, 문장 내 모든 단어에 대한 weighted feature 값을 더하여 s 에 라벨 l 이 부여될 수 있는지 점수를 매길 수 있다.</p>

<script type="math/tex; mode=display">score(l|s) = \sum_{j = 1}^m \sum_{i = 1}^n \lambda_j f_j(s, i, l_i, l_{i-1})</script>

<p>(첫 번째 시그마는 각각의 feature function <script type="math/tex">f</script> 에 대한 것이고, 안쪽 시그마는 <script type="math/tex">i</script> 위치의 단어 각각에 대한 연산이다.)</p>

<p>그 다음 지수 연산(exponentiating)과 정규화(normalizing)를 통해 이 점수를 확률
<script type="math/tex">p(l | s)</script> 로 환산할 수 있다.</p>

<script type="math/tex; mode=display">p(l | s) = \frac{exp[score(l|s)]}{\sum_{l’} exp[score(l’|s)]} = \frac{exp[\sum_{j = 1}^m \sum_{i = 1}^n \lambda_j f_j(s, i, l_i, l_{i-1})]}{\sum_{l’} exp[\sum_{j = 1}^m \sum_{i = 1}^n \lambda_j f_j(s, i, l’_i, l’_{i-1})]}</script>

<h3 id="feature-function-예시">Feature Function 예시</h3>
<p>그럼 이 feature function 들은 어떻게 생겼을까? POS tagging 의 feature 들은 다음과 같을 수 있다:</p>
<ul>
  <li>
    <script type="math/tex; mode=display">% <![CDATA[
f_1(s, i, l_i, l_{i-1}) =
\begin{cases}
 1 & \mbox{if }l_i = \text{부사(ADVERB)} \mbox{ and the ith word ends in “-ly”} \\
 0 & \mbox{otherwise.}
 \end{cases} %]]></script>
    <ul>
      <li>이 feature 에 대한 weight <script type="math/tex">\lambda_1</script> 값이 양수이고 큰 경우, 이 feature 는 -ly 로 끝나는 단어를 ‘부사’ 로 라벨링할 거라는 의미가 될 것이다.</li>
    </ul>
  </li>
  <li>
    <script type="math/tex; mode=display">% <![CDATA[
f_2(s, i, l_i, l_{i-1}) =
\begin{cases}
1 & \mbox{if } i = 1, l_i = 동사(VERB), \mbox{ and the sentence ends in a question mark} \\
0 & \mbox{otherwise.}
\end{cases} %]]></script>
    <ul>
      <li>마찬가지로 feature 에 대한 weight <script type="math/tex">\lambda_2</script> 값이 양수이고 큰 경우, ? 로 끝나는 문장의 첫 단어를 ‘동사’ 로 라벨링하고자 할 것이다.</li>
    </ul>
  </li>
  <li>
    <script type="math/tex; mode=display">% <![CDATA[
f_3(s, i, l_i, l_{i-1}) =
\begin{cases}
1 & \mbox{if }l_{i-1} = \mbox{형용사(ADJECTIVE)} \mbox{, and }l_i = \mbox{명사(NOUN)} \\
0 & \mbox{otherwise.}
\end{cases} %]]></script>
    <ul>
      <li>weight 가 양수 인 경우, 이 feature 는 형용사 뒤에는 명사가 온다는 것을 의미한다.</li>
    </ul>
  </li>
  <li>
    <script type="math/tex; mode=display">f_4(s, i, l_i, l_{i-1}) = 1 \mbox{ if }l_{i-1} =\mbox{ 전치사(PREPOSITION) and }l_i = \mbox{전치사(PREPOSITION).}</script>
    <ul>
      <li>이 함수에 대한 음수의 weight <script type="math/tex">\lambda_4</script> 는 전치사 뒤에는 전치시가 오면 안되다는 것을 의미한다. 따라서 그런 라벨링이 발생하지 않도록 할 수 있을 것이다.</li>
    </ul>
  </li>
</ul>

<p>이게 끝이다!<br />
정리해보면 CRF 를 만들기 위해서는,</p>
<ol>
  <li>feature function 몇 개를 정의해주고, (feature function 은 전체 문장, 현재 위치, 그리고 주변의 라벨 값을 참조한다.)</li>
  <li>weight 를 할당하고</li>
  <li>전체를 몽땅 더한 다음,</li>
  <li>필요하면 그 값을 확률로 환산하면 된다.</li>
</ol>

<p>이제 CRF 이 다른 머신 러닝 기술들와 어떻게 다른지 비교해보도록 하자.</p>

<h2 id="smells-like-logistic-regression">Smells like Logistic Regression…</h2>
<p>CRF 의 아래 식은 왠지 친숙해 보일 수도 있다. <em><a href="https://en.wikipedia.org/wiki/Logistic_regression" target="_blank">궁금하면 여기</a></em></p>

<script type="math/tex; mode=display">p(l | s) = \frac{exp[\sum_{j = 1}^m \sum_{i = 1}^n f_j(s, i, l_i, l_{i-1})]}{\sum_{l’} exp[\sum_{j = 1}^m \sum_{i = 1}^n f_j(s, i, l’_i, l’_{i-1})]}</script>

<p>왜냐하면 CRF 는 근본적으로 Logistic Regression 의 순차 버전(sequential version)이기 때문이다.</p>
<blockquote>

  <p>Logistic Regression 이 분류(claasification) 을 위한 log-linear 모델인데 반해,<br />
CRF 는 순차적인 라벨링(sequential labels) 을 위한 log-linear 모델이다.</p>
</blockquote>

<h2 id="looks-like-hmms">Looks like HMMs…</h2>
<p>HMM(<a href="http://en.wikipedia.org/wiki/Hidden_Markov_model" target="_blank">Hidden Markov Model</a>) 도 POS tagging(또한 일반적인 순차 라벨링) 에 사용될 수 있는 모델임을 기억하자.<br />
CRF 가 라벨링 점수를 계산하기 위해 여러 개의 feature function 을 다 같이 사용하는데 비해,<br />
HMM 은 라벨링을 위해 생성적(generative) 방식을 취한다. 그 식은 아래와 같다:</p>

<script type="math/tex; mode=display">p(l,s) = p(l_1) \prod_i p(l_i | l_{i-1}) p(w_i | l_i)</script>

<p>이 때,</p>
<ul>
  <li><script type="math/tex">p(l_i | l_{i-1})</script> 는 전이 확률(transition probabilities) - 예&gt; 전치사 뒤에 명사가 나올 확률</li>
  <li><script type="math/tex">p(w_i | l_i)</script> 는 방출 확률(emission probabilities) - 예&gt; ‘명사’ 라벨이 ‘아빠’ 일 확률</li>
</ul>

<p>그럼 HMM 과 CRF 는 어떻게 다른가?<br />
<strong>CRF 가 더 강력하다!</strong><br />
CRF 는 HMM 이 할 수 있는 모든 것을 모델링할 수 있고, 그것보다 더 많은 일을 해낸다. 왜 그런지는 아래를 살펴보자.</p>

<p>HMM 확률 식에 log 를 취하면 아래와 같다.</p>

<script type="math/tex; mode=display">\log p(l,s) = \log p(l_0) + \sum_i \log p(l_i | l_{i-1}) + \sum_i \log p(w_i | l_i)</script>


    <article>
    <div class="post-more">
      
      <a href="/study/2017/11/30/conditional-random-filed/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/study/jsmath/tex/2017/11/29/js-math/">
        jsMath(TeX) 주요 문법
      </a>
    </h1>

    <span class="post-date">29 Nov 2017</span>
     | 
    
    <a href="/blog/tags/#jsmath" class="post-tag">jsMath</a>
    
    <a href="/blog/tags/#tex" class="post-tag">TeX</a>
    
    

    <article>
      <h2 id="jsmathtex-in-markdown">jsMath(TeX) in markdown</h2>

<p>마크다운 문서에서는 아래와 같이 $$ 부호 내에 입력하면 자동 전환됨.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$$
y = x^2
$$
</code></pre></div></div>

<p>결과 :<br />
<script type="math/tex">y = x^2</script></p>

<h3 id="1-산술-함수">1. 산술 함수</h3>

<table>
  <thead>
    <tr>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>\exp_a b = a^b</td>
      <td style="text-align: center"><script type="math/tex">\exp_a b = a^b</script></td>
    </tr>
    <tr>
      <td>\exp b = e^b</td>
      <td style="text-align: center"><script type="math/tex">\exp b = e^b</script></td>
    </tr>
    <tr>
      <td>10^m, \ln c, \lg d = \log e</td>
      <td style="text-align: center"><script type="math/tex">10^m, \ln c, \lg d = \log e</script></td>
    </tr>
    <tr>
      <td>\log_{10} f</td>
      <td style="text-align: center"><script type="math/tex">\log_{10} f</script></td>
    </tr>
    <tr>
      <td>\min(x,y), \max(x,y)</td>
      <td style="text-align: center"><script type="math/tex">\min(x,y), \max(x,y)</script></td>
    </tr>
  </tbody>
</table>

<h3 id="2-미분">2. 미분</h3>

<table>
  <thead>
    <tr>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dt, \partial t, {dy \over dx}</td>
      <td style="text-align: center"><script type="math/tex">dt, \partial t, {dy \over dx}</script></td>
    </tr>
    <tr>
      <td>{\partial^2\over\partial x_1\partial x_2}y</td>
      <td style="text-align: center"><script type="math/tex">{\partial^2\over\partial x_1\partial x_2}y</script></td>
    </tr>
    <tr>
      <td>f’, f’’, f^{(3)}</td>
      <td style="text-align: center"><script type="math/tex">f', f'', f^{(3)}</script></td>
    </tr>
    <tr>
      <td>\dot y</td>
      <td style="text-align: center"><script type="math/tex">\dot y</script></td>
    </tr>
  </tbody>
</table>

<h3 id="3-근호">3. 근호</h3>

<table>
  <thead>
    <tr>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>\sqrt{2}, \sqrt[n]{x^5}</td>
      <td style="text-align: center"><script type="math/tex">\sqrt{2}, \sqrt[n]{x^5}</script></td>
    </tr>
    <tr>
      <td>\sqrt[3]{x^3+y^3 \over 2}</td>
      <td style="text-align: center"><script type="math/tex">\sqrt[3]{x^3+y^3 \over 2}</script></td>
    </tr>
  </tbody>
</table>

<h3 id="4-순열과-조합">4. 순열과 조합</h3>

<table>
  <thead>
    <tr>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{}<em>nP</em>{k}, <em>{n}C</em>{k}</td>
      <td style="text-align: center"><script type="math/tex">{}_nP_{k}, \; _{n}C_{k}</script></td>
    </tr>
    <tr>
      <td>^{n}P_{k}, P_{k}^{n}</td>
      <td style="text-align: center"><script type="math/tex">^{n}P_{k}, \; P_{k}^{n}</script></td>
    </tr>
    <tr>
      <td>C(n,k)</td>
      <td style="text-align: center"><script type="math/tex">C(n,k)</script></td>
    </tr>
  </tbody>
</table>

<h3 id="5-집합">5. 집합</h3>

<table>
  <thead>
    <tr>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{ }</td>
      <td style="text-align: center"><script type="math/tex">\{ \}</script></td>
    </tr>
    <tr>
      <td>\in, \notin, \ni, \not\ni</td>
      <td style="text-align: center"><script type="math/tex">\in, \notin, \ni, \not\ni</script></td>
    </tr>
    <tr>
      <td>\cap, \cup, \subset, \supset</td>
      <td style="text-align: center"><script type="math/tex">\cap, \cup, \subset, \supset</script></td>
    </tr>
  </tbody>
</table>

<h3 id="6-위-아래-전치-후치-첨자">6. 위, 아래, 전치, 후치, 첨자</h3>

<table>
  <thead>
    <tr>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>y_m,   a_{i,j},   x_2^3</td>
      <td style="text-align: center"><script type="math/tex">y_m, \; a_{i,j}, \; x_2^3</script></td>
    </tr>
    <tr>
      <td>{}<em>{b}^{a}X,   _{c}^{a}C</em>{d}^{b}</td>
      <td style="text-align: center"><script type="math/tex">{}_{b}^{a}X, \; _{c}^{a}C_{d}^{b}</script></td>
    </tr>
    <tr>
      <td>\overset{x}{P},   \underset{y}{Z}</td>
      <td style="text-align: center"><script type="math/tex">\overset{x}{P}, \; \underset{y}{Z}</script></td>
    </tr>
  </tbody>
</table>

<h3 id="7-기타">7. 기타</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th>TeX</th>
      <th style="text-align: center">결과</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">공백</td>
      <td>a \quad b, a\ b</td>
      <td style="text-align: center"><script type="math/tex">a \quad b, a\ b</script></td>
    </tr>
    <tr>
      <td style="text-align: center">색깔</td>
      <td>{\color{Blue}x^2}+{\color{Red}2x}-{\color{Green}1}</td>
      <td style="text-align: center"><script type="math/tex">{\color{Blue}x^2}+{\color{Red}2x}-{\color{Green}1}</script></td>
    </tr>
    <tr>
      <td style="text-align: center">한글</td>
      <td>\text{한 글}</td>
      <td style="text-align: center"><script type="math/tex">\text{한 글}</script></td>
    </tr>
    <tr>
      <td style="text-align: center">괄호</td>
      <td>\left( \frac{1}{2} \right)</td>
      <td style="text-align: center"><script type="math/tex">\left( \frac{1}{2} \right)</script></td>
    </tr>
    <tr>
      <td style="text-align: center">집합 괄호</td>
      <td>\left\{ A \right\}</td>
      <td style="text-align: center"><script type="math/tex">\left\{ A \right\}</script></td>
    </tr>
    <tr>
      <td style="text-align: center">시그마</td>
      <td>\sum_{k=1}^N k^2</td>
      <td style="text-align: center"><script type="math/tex">\sum_{k=1}^N k^2</script></td>
    </tr>
    <tr>
      <td style="text-align: center">곱기호</td>
      <td>\prod_{i=1}^N x_i</td>
      <td style="text-align: center"><script type="math/tex">\prod_{i=1}^N x_i</script></td>
    </tr>
    <tr>
      <td style="text-align: center">극한</td>
      <td>\lim_{n \to \infty}x_n</td>
      <td style="text-align: center"><script type="math/tex">\lim_{n \to \infty}x_n</script></td>
    </tr>
    <tr>
      <td style="text-align: center">적분</td>
      <td>\int_{-N}^{N} e^x\, dx</td>
      <td style="text-align: center"><script type="math/tex">\int_{-N}^{N} e^x\, dx</script></td>
    </tr>
  </tbody>
</table>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f(n)=
\begin{cases}
n/2, &amp; \mbox{if }n\mbox{ is even} \\
3n+1, &amp; \mbox{if }n\mbox{ is odd}
\end{cases}
</code></pre></div></div>
<p><script type="math/tex">% <![CDATA[
f(n)=
\begin{cases}
n/2, & \mbox{if }n\mbox{ is even} \\
3n+1, & \mbox{if }n\mbox{ is odd}
\end{cases} %]]></script></p>

    <article>
    <div class="post-more">
      
      <a href="/study/jsmath/tex/2017/11/29/js-math/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/study/2017/11/29/gibbs-sampling/">
        Gibbs Sampling
      </a>
    </h1>

    <span class="post-date">29 Nov 2017</span>
     | 
    
    <a href="/blog/tags/#gibbs-sampling" class="post-tag">gibbs-sampling</a>
    
    

    <article>
      <h2 id="정의">정의</h2>
<p>In statistics, Gibbs sampling or a Gibbs sampler is a Markov chain Monte Carlo (MCMC) algorithm for obtaining a sequence of observations which are approximated from a specified multivariate probability distribution, when direct sampling is difficult. This sequence can be used to approximate the joint distribution (e.g., to generate a histogram of the distribution); to approximate the marginal distribution of one of the variables, or some subset of the variables (for example, the unknown parameters or latent variables); or to compute an integral (such as the expected value of one of the variables). Typically, some of the variables correspond to observations whose values are known, and hence do not need to be sampled.</p>

<p>Gibbs sampling is commonly used as a means of statistical inference, especially Bayesian inference. It is a randomized algorithm (i.e. an algorithm that makes use of random numbers), and is an alternative to deterministic algorithms for statistical inference such as the expectation-maximization algorithm (EM).</p>

<p>As with other MCMC algorithms, Gibbs sampling generates a Markov chain of samples, each of which is correlated with nearby samples. As a result, care must be taken if independent samples are desired. Generally, samples from the beginning of the chain (the burn-in period) may not accurately represent the desired distribution and are usually discarded. If necessary, one possible remedy is thinning the resulting chain of samples (i.e. only taking every nth value, e.g. every 10th value). It has been shown, however, that using a longer chain instead (e.g. a chain that is n times as long as the initially considered chain using a thinning factor of n) leads to better estimates of the true posterior. Thus, thinning should only be applied when time or computer memory are restricted.[1]</p>

<p>hello
<script type="math/tex">y = \frac{x ^ 2}{2} K\left(1-\sqrt{x^3 - 8}\right)</script>
world</p>

<p>출처 : <a href="https://en.wikipedia.org/wiki/Gibbs_sampling#Introduction" target="_blank">Gibbs Sampling</a></p>

    <article>
    <div class="post-more">
      
      <a href="/study/2017/11/29/gibbs-sampling/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/study/2017/11/29/Monte-Carlo-Method/">
        Monte Carlo Method
      </a>
    </h1>

    <span class="post-date">29 Nov 2017</span>
     | 
    
    <a href="/blog/tags/#monte-carlo-method" class="post-tag">monte-carlo-method</a>
    
    

    <article>
      <h2 id="정의">정의</h2>
<p>난수를 이용하여 함수의 값을 확률적으로 계산하는 알고리즘.</p>
<h4 id="핵심-아이디어">핵심 아이디어</h4>
<blockquote>
  <p>이론상 determistic 할지도 모르는 문제에 대해 randomness 를 사용하여 해결한다!</p>
</blockquote>

<p>주로 물리/수학적 문제들에 대해 다른 방법으로 해결할 수 없는 경우에 사용한다.(ㅋㅋ)</p>

<h4 id="주요-적용-분야">주요 적용 분야</h4>
<ol>
  <li>최적화 문제</li>
  <li>numerical integration (수치적 미분?)</li>
  <li>확률 분포로부터 draw 를 생성 (generating draw from probability distribution)</li>
</ol>

<h4 id="어떻게-동작하나">어떻게 동작하나?</h4>
<p>일반적으로 아래 패턴으로 동작함.</p>
<ol>
  <li>입력 가능한 데이터의 도메인을 정의한다.</li>
  <li>해당 도메인에 대한 확률 분포로부터 랜덤 데이터를 생성</li>
  <li>입력 데이터에 대한 deterministic 계산을 수행</li>
  <li>결과 수집</li>
</ol>

<p>예를 들어, (x,y) 그래프의 1 사분면에 (0, 0) 을 중점으로 하고 반지름이 1 인 원이 있다고 생각해보자. 원의 넓이는 π/4 일 것이다.<br />
이 때 Monte Carlo Method 를 이용해 π 값을 근사해 보면,</p>
<ol>
  <li>한 변의 길이가 1인 정사각형을 그리고, 그 안에 반지름이 1 인 원을 그린다. (1/4 원)</li>
  <li>균등한 크기의 물체를 사각형 안에 균등하게 흩뿌린다.(uniformly scatter)</li>
  <li>원 안에 들어간 물체의 갯수와 전체 갯수를 센다.</li>
  <li>원 안에 들어간 물체의 갯수와 전체 갯수의 비율은 두 영역의 비율과 같으므로, 즉 π/4 가 된다.<br />
해당 비율에 4을 곱해서 π 의 근사치를 구할 수 있다.</li>
</ol>

<p>여기서 중요한 포인트 2가지.</p>
<blockquote>

  <ol>
    <li>흩뿌릴 때 균등하게 분포되지 않으면 결과가 좋지 않을 것이다.</li>
    <li>입력 데이터의 갯수가 많아야 한다. 많을 수록 결과가 개선될 것이다.</li>
  </ol>
</blockquote>

<p><img src="/public/img/monte.gif" alt="monte carlo method" /></p>

<p>Monte Carlo Method 를 적용하기 위해서는 많은 수의 랜덤 값들이 요구되는데, 이로 인하여 pseudorandom number generator 의 개발에 박차를 가하게 되었다. pseudorandom number generator 는 기존에 통계적 샘플링에서 주로 사용되던 랜덤 숫자 테이블(table of random numbers) 대비 훨씬훨씬 성능이 좋았다.</p>

<p>출처 : <a href="https://en.wikipedia.org/wiki/Monte_Carlo_method" target="_blank">Monte Carlo method</a></p>

    <article>
    <div class="post-more">
      
      <a href="/study/2017/11/29/Monte-Carlo-Method/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/mongoose/study/2017/11/25/mongo-tips/">
        Tips for Mongodb
      </a>
    </h1>

    <span class="post-date">25 Nov 2017</span>
     | 
    
    

    <article>
      <h1 id="useful-queries">Useful queries</h1>

<ul>
  <li><strong>$ne</strong><br />
desc != ''
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ desc: { $ne : '' } }
</code></pre></div>    </div>
  </li>
  <li><strong>$in</strong>,  <strong>$nin</strong><br />
desc is in [] (or not in [])
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ desc: { $nin : ['', null] } }
</code></pre></div>    </div>
  </li>
  <li><strong>$regex</strong> : 정규 표현식<br />
해당 단어를 포함하는지 확인 가능
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ 'title' : { $regex : 'shaver' } }
</code></pre></div>    </div>
  </li>
</ul>

<h1 id="data-export--import">Data export / import</h1>

<ul>
  <li>export
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mongoexport -h 127.0.0.1:27000 -d dbName -c collectionName -o filename.json
</code></pre></div>    </div>
  </li>
  <li>import
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mongoimport -h 127.0.0.1:27017 -d dbName -c collectionName --file filename.json
</code></pre></div>    </div>
  </li>
</ul>

    <article>
    <div class="post-more">
      
      <a href="/mongoose/study/2017/11/25/mongo-tips/"><i class="fa fa-plus-circle" aria-hidden="true"></i>Read more</a>
    </div>
  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/blog/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
</html>
